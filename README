OBus is a pure ocaml implementation of DBus.

url: https://forge.ocamlcore.org/projects/obus/

* Requirements:

  obus depends on the following packages:

  lwt:        http://www.ocsigen.org/install/lwt
  pa_monad:   http://www.cas.mcmaster.ca/~carette/pa_monad/
  type-conv:  http://www.ocaml.info/home/ocaml_sources.html#type-conv
  xml-light:  http://tech.motion-twin.com/xmllight.html

* Installation:

  To compile and install OBus just type:

  $ make all
  $ make PREFIX=<prefix> install

* Using the library

  OBus install the following packages:

  - obus:
      The core library, implementing the DBus protocol.

  - obus.syntax:
      Some syntactic sugars meant to be used with obus.

  - obus.notification:
      Interface to the freedesktop notification service.

  - obus.hal:
      Interface to the freedesktop hal service.

* Syntactic sugars:

  The syntax extension add the following quotation:

    <:obus_type< >> and <:obus_func_type< >>.

  These are expanded into expression describing a DBus type (see
  OBus_type for more information).

  They recognise types written in the original syntax of caml types +
  the two following constructions:

    `` {key_type, value_type} '' = tdict_entry key_type value_type
    `` [t] '' = tstructure t

  It also add some construction to easily define conversion between
  caml data structure and more basic values. Look at the
  implementation of the bindings to see some examples.

* Using tools:

  There is two tools in the obus distribution:

  obus-introspect which can introspect a DBus service, and obus-binder
  which is a tool for generating skeleton from DBus introspection
  data.

  The caml files generated by obus-binder are meant to be edited and
  adapted. In practice introspections files contains only marshaling
  informations so it is often not sufficient for creating a usable
  binding.

  Here is a simple example of use of the tools:

  $ obus-introspect org.freedesktop.Notifications /org/freedesktop/Notifications > notif.xml
  $ obus-binder notif.xml

  By default obus-binder produce code that use the syntax extension
  but you cam disable this behaviour with the "-no-sugar" flag.

  Note that for some service you can not retrieve all interface
  definitions at run-time, so you have too look at the source or the
  documentation to find them.

* Development:

  The last development version of obus can always be found in the
  darcs repository hosted at darcs.ocamlcore.org:

  $ darcs get http://darcs.ocamlcore.org/repos/obus/obus
